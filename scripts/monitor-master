import json
from chaosindy.probes.validator_info import get_validator_info, get_chaos_temp_dir


# Generate a temp dir containing JSON for each validator node
get_validator_info("/home/ubuntu/chaosindy/pool_transactions_genesis")
temp_dir = get_chaos_temp_dir()

# Extract Catchup_status for the domain ledger for each validator_node
print("Node\tMaster")
print("")
for x in range(1,11):
    #import pdb; pdb.set_trace()
    filename = "{}/Node{}-validator-info".format(temp_dir, x)
    with open(filename, 'r') as f:
        validator_info = json.load(f)
        print("Node{}\t{}".format( x,   
            validator_info['data']['Node_info']['Replicas_status']['Node{}:0'.format(x)]['Primary']))
